import asyncio
import os
from aiogram import Bot, Dispatcher, types
from aiogram.contrib.fsm_storage.memory import MemoryStorage
from aiogram.utils import executor
import keyboards
import db_api
from aiogram.types import Message, ChatJoinRequest, MediaGroup
import sender

TOKEN = '6447292179:AAGCgLqv-cgLHr5lIYnB_6R7kQsZuAn9S6o'
bot = Bot(TOKEN)
dp = Dispatcher(bot, storage=MemoryStorage())
sender.set_bot(dp)
sender.init_handlers()


@dp.message_handler(commands=['start'])
async def start(message: Message):
    db_api.add_user(message.chat.id)
    path = os.path.join(os.path.dirname(__file__), 'img', 'start.png')
    f = open(path, 'rb')

    await message.answer_photo(
        photo=f,
        caption='–ë—Ä–æ, —Å–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø—Ä–æ—è–≤–∏–ª <b>–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É</b>!\n'
        '–Ø —Ü–µ–Ω—é —ç—Ç–æ –≤ –ª—é–¥—è—Ö, –∞ –µ—â—ë —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Ç—ã –ø—Ä–∞–≤–¥–∞ —Ö–æ—á–µ—à—å –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å üí∏\n\n'
        '–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ç–µ–±—è –≤—Å–µ–≥–æ –ª–∏—à—å –Ω–∞–¥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —à–∞–≥–∏ –≤ –º–æ—ë–º –±–æ—Ç–µ üëâüèª @Lucky_hackjet_bot üëàüèª\n'
        '–ü–æ—Å–ª–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—ã –ø–æ–ª—É—á–∏—à—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤ –º–æ–π —á–∞—Å—Ç–Ω—ã–π –∫–∞–Ω–∞–ª —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ –Ω–∞ —Ü–µ–ª—ã—Ö 3 –¥–Ω—è ‚åõÔ∏è',
        parse_mode='html',
        reply_markup=keyboards.start
    )

    f.close()


@dp.message_handler(lambda m: m.text == 'ü§ñ –ü–ï–†–ï–ô–¢–ò –í –ë–û–¢–ê ü§ñ')
async def get_bot(message: Message):
    await message.answer(
        '‚ö°Ô∏è–°–∫–æ—Ä–µ–µ –ø–µ—Ä–µ—Ö–æ–¥–∏ –≤ –±–æ—Ç–∞ –∏ –ø—Ä–æ—Ö–æ–¥–∏ –≤—Å–µ —à–∞–≥–∏, –ø–æ–∫–∞ –µ–≥–æ –µ—â—ë –Ω–µ –ø—Ä–∏–∫—Ä—ã–ª–∏ ‚úÖ\n\n'
        '‚û°Ô∏è @Lucky_hackjet_bot ‚¨ÖÔ∏è'
    )


@dp.message_handler(lambda m: m.text == 'üôè –ù–£–ñ–ù–ê –ü–û–ú–û–©–¨ üôè')
async def get_help(message: Message):
    await message.answer(
        '‚ÅâÔ∏è –°—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π ‚ùì –í –∫–∞–Ω–∞–ª–µ –Ω–∏–∂–µ —Ç—ã –Ω–∞–π–¥—ë—à—å –æ—Ç–≤–µ—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ª—é–±–æ–π —Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å, '
        '–∞ —Ç–∞–∫ –∂–µ –º–æ–π –ª–∏—á–Ω—ã–π Telegram –∞–∫–∫–∞—É–Ω—Ç üì≤\n\n'
        '‚û°Ô∏è @helpfromdanya ‚¨ÖÔ∏è'
    )


@dp.chat_join_request_handler()
async def start1(update: ChatJoinRequest):
    db_api.add_user(update.from_user.id)
    await update.approve()
    path = os.path.join(os.path.dirname(__file__), 'img')
    f = open(os.path.join(path, 'start.png'), 'rb')

    await bot.send_photo(
        chat_id=update.from_user.id,
        photo=f,
        caption='–ë—Ä–æ, —Å–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø—Ä–æ—è–≤–∏–ª <b>–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É</b>!\n'
                '–Ø —Ü–µ–Ω—é —ç—Ç–æ –≤ –ª—é–¥—è—Ö, –∞ –µ—â—ë —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Ç—ã –ø—Ä–∞–≤–¥–∞ —Ö–æ—á–µ—à—å –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å üí∏\n\n'
                '–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ç–µ–±—è –≤—Å–µ–≥–æ –ª–∏—à—å –Ω–∞–¥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —à–∞–≥–∏ –≤ –º–æ—ë–º –±–æ—Ç–µ üëâüèª @Lucky_hackjet_bot üëàüèª\n'
                '–ü–æ—Å–ª–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—ã –ø–æ–ª—É—á–∏—à—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤ –º–æ–π —á–∞—Å—Ç–Ω—ã–π –∫–∞–Ω–∞–ª —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ –Ω–∞ —Ü–µ–ª—ã—Ö 3 –¥–Ω—è ‚åõÔ∏è',
        parse_mode='html',
        reply_markup=keyboards.start
    )

    f.close()

    await asyncio.sleep(10800)
    await bot.send_video_note(
        chat_id=update.from_user.id,
        video_note=open(os.path.join(path, 'video_note.mp4'), 'rb')
    )

    await asyncio.sleep(10800)

    media = MediaGroup()
    media.attach_photo(
        types.InputFile(os.path.join(path, 'img1.png')),
        caption='''–ù–ï –¢–ï–†–Ø–ô –í–†–ï–ú–Ø! ü§¨

–ü—Ä—è–º–æ —Å–µ–π—á–∞—Å –æ—Ç–ª–∏—á–Ω—ã–π –º–æ–º–µ–Ω—Ç –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ —Å–æ –º–Ω–æ–π ü§ù
–ö—Ç–æ-—Ç–æ –∏–∑ —Ä–µ–±—è—Ç –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞—Ö –≤—Å—Ç—É–ø–∏–ª –≤ –º–æ–π –∑–∞–∫—Ä—ã—Ç—ã–π —á–∞—Ç –≤—á–µ—Ä–∞, –∞ –∫—Ç–æ-—Ç–æ —Å–µ–≥–æ–¥–Ω—è —É—Ç—Ä–æ–º üëèüèª
–ù–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–Ω–∏ –¥–æ–±–∏–ª–∏—Å—å –∑–∞ —Ç–∞–∫–æ–π –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ üò≥

–ù–∞ —á—Ç–æ –±—ã —Ç—ã –ø–æ—Ç—Ä–∞—Ç–∏–ª —Å–≤–æ–∏ –ø–µ—Ä–≤—ã–µ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Å–æ –º–Ω–æ–π 50.000‚ÇΩ? –ü—Ä–∏–¥—É–º–∞–ª? ü§®
–¢–æ–≥–¥–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–ø–∞–¥–∏ –≤ —ç—Ç–æ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–∞–Ω–∞–ª —Å –ø–æ–º–æ—â—å—é –º–æ–µ–≥–æ –±–æ—Ç–∞  üëâüèª @Lucky_hackjet_bot üëàüèª –∏ —Ä–µ–∞–ª–∏–∑—É–π –∑–∞–¥—É–º–∞–Ω–Ω–æ–µ ‚ú®
–ï—Å–ª–∏ —É —Ç–µ–±—è —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —Ç–æ –Ω–∞–ø–∏—à–∏ –º–Ω–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —è —Ç–µ–±–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–º–æ–≥—É ü§ù
@Danya_Lucky777''',
    )
    media.attach_photo(types.InputFile(os.path.join(path, 'img2.png')))
    media.attach_photo(types.InputFile(os.path.join(path, 'img3.png')))
    media.attach_photo(types.InputFile(os.path.join(path, 'img4.png')))
    await bot.send_media_group(update.from_user.id, media)

    await asyncio.sleep(10800)

    await bot.send_photo(
        update.from_user.id,
        photo=open(os.path.join(path, 'time_for.png'), 'rb'),
        caption='''‚ùóÔ∏è‚ùóÔ∏è –í—Ä–µ–º—è - —Å–∞–º–æ–µ —Ü–µ–Ω–Ω–æ–µ —á—Ç–æ –µ—Å—Ç—å —É –Ω–∞—Å

–¢–æ –∫–∞–∫ –º—ã –∏–º —Ä–∞—Å–ø–æ—Ä—è–¥–∏–º—Å—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ –∫–∞–∫ –º—ã –ø—Ä–æ–∂–∏–≤–∞–µ–º —ç—Ç—É –∂–∏–∑–Ω—å‚úÖ

üòí–ï—Å–ª–∏ –º—ã –±—É–¥–µ–º —Ç—Ä–∞—Ç–∏—Ç—å 8-12 —á–∞—Å–æ–≤ –Ω–∞ –Ω–∞—ë–º–Ω–æ–π —Ä–∞–±–æ—Ç–µ, –∑–∞ 20, 30, –¥–∞ –¥–∞–∂–µ –∑–∞ 50 —Ç—ã—Å—è—á –≤ –º–µ—Å—è—Ü - –º—ã –ø—Ä–æ–∂–∏–≤—ë–º —Å–≤–æ—é –∂–∏–∑–Ω—å —Å–µ—Ä–æ –∏ —Å–∫—É—á–Ω–æ, –Ω–∏—á–µ–≥–æ —Ç–∞–∫ –∏ –Ω–µ –¥–æ–±–∏–≤—à–∏—Å—å 

üìà–ñ–ò–í–ò –ü–û–õ–ù–û–ô –ñ–ò–ó–ù–¨–Æ - –ø–µ—Ä–µ—Ö–æ–¥–∏ –≤ –º–æ–µ–≥–æ –±–æ—Ç–∞ @Lucky_hackjet_bot , –æ–Ω –∑–Ω–∞–µ—Ç –∫–∞–∫ —Ç–µ–±–µ –ø–æ–º–æ—á—å üòé
‚ö°Ô∏è –ï—Å–ª–∏ —Ç—ã —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π, —Ç–æ–≥–¥–∞ –ø–∏—à–∏ –º–Ω–µ –Ω–∞–ø—Ä—è–º—É—é ‚Äî @Danya_Lucky777 , –∏ —è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ –ø–æ–º–æ–≥—É —Ç–µ–±–µ —Å–æ —Å—Ç–∞—Ä—Ç–æ–º —Ç–≤–æ–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∫–∞''',
        reply_markup=keyboards.go_to_bot
    )

    await asyncio.sleep(10800)

    await bot.send_message(
        update.from_user.id,
        '''–ü—Ä–∏–≤–µ—Ç, –∫—É–¥–∞ —Ç–µ–±–µ —Å–∫–∏–Ω—É—Ç—å –¥–µ–Ω—å–≥–∏?




ü§´ –≠—Ç–æ –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ø–æ—Å–ª–µ —á–µ–≥–æ —Ç–µ–±–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –ª–∏—à—å —Å–¥–µ–ª–∞—Ç—å –∫–ª–∏–∫ –ø–æ –º—ã—à–∫–µ –∏ –∑–∞–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç üöÄ –î–µ–Ω—å–≥–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –±—ã—Å—Ç—Ä–æ üôÉ

–ù—É —á—Ç–æ, –≥–æ—Ç–æ–≤ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å? üíµ
–ò–ª–∏ –∏ –¥–∞–ª—å—à–µ –±—É–¥–µ—à—å –º–µ—á—Ç–∞—Ç—å –ø–æ –Ω–æ—á–∞–º? üòÇ''',
        reply_markup=keyboards.go_to_bot
    )

    await asyncio.sleep(10800)

    await bot.send_photo(
        update.from_user.id,
        open(os.path.join(path, 'choice_mama.png'), 'rb'),
        caption='''–¢—ã —É–∂–µ –≤—ã–±—Ä–∞–ª, —á—Ç–æ –ø–æ–¥–∞—Ä–∏—à—å —Ä–æ–¥–∏—Ç–µ–ª—è–º? üéÅ

–£–≤–µ—Ä–µ–Ω, —Ç–≤–æ—è –º–∞–º–∞ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç —Ç–æ–≥–æ, —á—Ç–æ–±—ã –µ–µ —Å—ã–Ω —Ö–æ—Ä–æ—à–æ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–ª, –Ω–µ—É–∂–µ–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –µ–µ —Ä–∞—Å—Å—Ç—Ä–æ–∏—Ç—å, –±—Ä–æ? üôà
–Ø –¥–∞—é —Ç–µ–±–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å. –¢—ã  - —Å—Ç–∞–≤–∏—à—å –ø–æ —Å–∏–≥–Ω–∞–ª–∞–º. –í—Å–µ –≤ –ø–ª—é—Å–µ, –ø—Ä–∞–≤–¥–∞? üôåüèª

–ü—Ä–æ—Å—Ç–æ –∑–∞–∫–æ–Ω—á–∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤–æ—Ç –∑–¥–µ—Å—å üëâüèª @Lucky_hackjet_bot üëàüèª –∏ —É–∂–µ –∫ –≤–µ—á–µ—Ä—É –≤—ã–≤–æ–¥–∏ –Ω–∞ –∫–∞—Ä—Ç—É –¥–æ 8000 —Ä—É–±–ª–µ–π üí∏

–ê –µ—Å–ª–∏ —É —Ç–µ–±—è —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –Ω–∞–ø–∏—à–∏ –º–Ω–µ –æ —Å–≤–æ–µ–π –ø—Ä–æ–±–ª–µ–º–µ, –∏ –∫–∏–Ω—å –ø–∞—Ä—É —Å–∫—Ä–∏–Ω–æ–≤, –≥–¥–µ –ø–æ–∫–∞–∑–∞–Ω–æ, –≥–¥–µ —Ç—ã –∑–∞—Å—Ç—Ä—è–ª üòå @Danya_Lucky777 ‚ö°Ô∏è''',
        reply_markup=keyboards.big_money
    )


executor.start_polling(dp, allowed_updates=['message', 'edited_message', 'channel_post', 'edited_channel_post',
                                            'inline_query', 'chosen_inline_result', 'callback_query', "chat_member", 'chat_join_request'])
